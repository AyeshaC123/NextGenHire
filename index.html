<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Cover Letter Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: #f5f7fa;
            color: #2d3748;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #1a365d;
            margin-bottom: 1rem;
        }

        .header p {
            color: #4a5568;
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .input-section, .output-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #4a5568;
            font-weight: 500;
        }

        textarea, input[type="file"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background: #f8fafc;
            margin-bottom: 1rem;
        }

        textarea {
            min-height: 200px;
            resize: vertical;
        }

        .file-input-wrapper {
            position: relative;
            margin-bottom: 1rem;
        }

        .file-input-wrapper input[type="file"] {
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-input-button {
            display: block;
            padding: 0.75rem;
            background: #edf2f7;
            border: 2px dashed #cbd5e0;
            border-radius: 6px;
            text-align: center;
            color: #4a5568;
            cursor: pointer;
        }

        .file-input-button:hover {
            background: #e2e8f0;
        }

        .button {
            background: #4299e1;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .button:hover {
            background: #3182ce;
        }

        .button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .generated-content {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
            min-height: 400px;
        }

        .editing-tools {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
        }

        .suggestion-chip {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #ebf8ff;
            color: #2b6cb0;
            border-radius: 9999px;
            margin: 0.25rem;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .suggestion-chip:hover {
            background: #bee3f8;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3182ce;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: #e53e3e;
            background: #fff5f5;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            display: none;
        }

        .success-message {
            color: #2f855a;
            background: #f0fff4;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>AI Cover Letter Generator</h1>
            <p>Create personalized, ATS-optimized cover letters using AI</p>
        </header>

        <main class="main-content">
            <section class="input-section">
                <h2 class="section-title">Upload Documents</h2>
                
                <div class="form-group">
                    <label>Upload Resume (PDF, DOC, DOCX)</label>
                    <div class="file-input-wrapper">
                        <div class="file-input-button" id="resumeUploadButton">
                            <span>Click to upload or drag and drop your resume</span>
                        </div>
                        <input type="file" id="resumeUpload" accept=".pdf,.doc,.docx">
                    </div>
                </div>

                <div class="form-group">
                    <label>Job Description</label>
                    <textarea id="jobDescription" placeholder="Paste the job description here..."></textarea>
                </div>

                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>

                <button id="generateButton" class="button">Generate Cover Letter</button>
            </section>

            <section class="output-section">
                <h2 class="section-title">Generated Cover Letter</h2>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p>Generating your cover letter...</p>
                </div>

                <div class="generated-content" id="generatedContent" contenteditable="true">
                    Your generated cover letter will appear here...
                </div>

                <div class="editing-tools">
                    <button class="button" id="regenerateButton" disabled>Regenerate</button>
                    <button class="button" id="copyButton">Copy to Clipboard</button>
                </div>

                <div id="suggestions">
                    <h3 class="section-title">AI Suggestions</h3>
                    <div id="suggestionChips"></div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Mock AI analysis and generation functions
        function analyzeResume(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = () => {
                    // Mock resume analysis
                    resolve({
                        skills: ['JavaScript', 'Python', 'Project Management'],
                        experience: ['Software Developer', 'Team Lead'],
                        achievements: ['Increased efficiency by 40%', 'Led team of 5 developers']
                    });
                };
                reader.readAsText(file);
            });
        }

        function analyzeJobDescription(text) {
            // Mock job description analysis
            return {
                requirements: ['JavaScript', 'Team leadership', 'Problem-solving'],
                responsibilities: ['Develop web applications', 'Lead team meetings'],
                company_values: ['Innovation', 'Collaboration']
            };
        }

        function generateCoverLetter(resumeData, jobData) {
            // Mock cover letter generation
            const commonSkills = resumeData.skills.filter(skill => 
                jobData.requirements.includes(skill));
            
            return `Dear Hiring Manager,

I am writing to express my strong interest in the [Position] role at [Company Name]. With my background in ${resumeData.experience.join(' and ')}, I am confident in my ability to contribute effectively to your team.

Throughout my career, I have developed expertise in ${commonSkills.join(', ')}, which align perfectly with your requirements. ${resumeData.achievements[0]}, demonstrating my commitment to excellence and results-driven approach.

I am particularly drawn to [Company Name]'s focus on ${jobData.company_values.join(' and ')}, as these values mirror my own professional principles. My experience in ${jobData.responsibilities[0]} positions me well to take on the responsibilities of this role.

Thank you for considering my application. I look forward to discussing how I can contribute to your team's success.

Best regards,
[Your Name]`;
        }

        // UI Interaction
        const resumeUpload = document.getElementById('resumeUpload');
        const jobDescription = document.getElementById('jobDescription');
        const generateButton = document.getElementById('generateButton');
        const regenerateButton = document.getElementById('regenerateButton');
        const copyButton = document.getElementById('copyButton');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const generatedContent = document.getElementById('generatedContent');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const suggestionChips = document.getElementById('suggestionChips');

        let resumeData = null;
        let jobData = null;

        resumeUpload.addEventListener('change', async (e) => {
            if (e.target.files.length > 0) {
                try {
                    resumeData = await analyzeResume(e.target.files[0]);
                    successMessage.textContent = 'Resume uploaded and analyzed successfully!';
                    successMessage.style.display = 'block';
                    errorMessage.style.display = 'none';
                } catch (error) {
                    errorMessage.textContent = 'Error analyzing resume. Please try again.';
                    errorMessage.style.display = 'block';
                    successMessage.style.display = 'none';
                }
            }
        });

        generateButton.addEventListener('click', async () => {
            if (!resumeData || !jobDescription.value.trim()) {
                errorMessage.textContent = 'Please upload a resume and provide a job description.';
                errorMessage.style.display = 'block';
                return;
            }

            loadingIndicator.classList.add('active');
            generatedContent.style.display = 'none';

            try {
                jobData = analyzeJobDescription(jobDescription.value);
                const coverLetter = generateCoverLetter(resumeData, jobData);

                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1500));

                generatedContent.textContent = coverLetter;
                regenerateButton.disabled = false;

                // Generate AI suggestions
                const suggestions = [
                    'Add more specific achievements',
                    'Mention company culture fit',
                    'Highlight leadership experience',
                    'Include relevant certifications'
                ];

                suggestionChips.innerHTML = suggestions.map(suggestion => 
                    `<span class="suggestion-chip">${suggestion}</span>`
                ).join('');

                successMessage.textContent = 'Cover letter generated successfully!';
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
            } catch (error) {
                errorMessage.textContent = 'Error generating cover letter. Please try again.';
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
            } finally {
                loadingIndicator.classList.remove('active');
                generatedContent.style.display = 'block';
            }
        });

        regenerateButton.addEventListener('click', () => {
            generateButton.click();
        });

        copyButton.addEventListener('click', () => {
            const content = generatedContent.textContent;
            navigator.clipboard.writeText(content).then(() => {
                successMessage.textContent = 'Cover letter copied to clipboard!';
                successMessage.style.display = 'block';
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 3000);
            });
        });

        // Make the file input button work with the hidden file input
        document.getElementById('resumeUploadButton').addEventListener('click', () => {
            resumeUpload.click();
        });

        // Update file input button text when file is selected
        resumeUpload.addEventListener('change', (e) => {
            const fileName = e.target.files[0]?.name;
            if (fileName) {
                document.querySelector('#resumeUploadButton span').textContent = `Selected: ${fileName}`;
            }
        });

        // Handle drag and drop
        const dropZone = document.getElementById('resumeUploadButton');

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults (e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            dropZone.style.background = '#e2e8f0';
            dropZone.style.borderColor = '#4299e1';
        }

        function unhighlight(e) {
            dropZone.style.background = '#edf2f7';
            dropZone.style.borderColor = '#cbd5e0';
        }

        dropZone.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            resumeUpload.files = files;
            const event = new Event('change');
            resumeUpload.dispatchEvent(event);
        }
    </script>
</body>
</html>
